{"version":3,"sources":["webpack:///./js/components/contact/index.js","webpack:///./js/components/contact/template.html","webpack:///./js/lib/contact-form.js","webpack:///./js/lib/scroll-header.js"],"names":["template","require","props","data","sstate","store","state","loading","storedPost","show","mounted","document","title","he","decode","site","_wpapix","then","wpapix","path","Path","fetch","done","rpost","console","log","$nextTick","ScrollHeader","init","ContactForm","updated","methods","showImg","postTitle","post","rendered","postContent","user","member_content","as","subscriber","membership","content","computed","postData","posts","img","background_image","watch","$route","to","from","last_scroll","scroll_dir","$","_","$el","off","on","e","preventDefault","serialize","destroy","jQuery","header","container","scrollTop","last","dir","cur","$head","stop","animate","top","innerHeight","topH","removeClass","addClass"],"mappings":"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","file":"3.js","sourcesContent":["import store from '../../lib/store';\nimport _wpapix from '../../lib/wpapix';\nimport ScrollHeader from '../../lib/scroll-header';\nimport ContactForm from '../../lib/contact-form';\nimport he from 'he';\nexport default {\n  template: require( './template.html' ),\n  props: [ 'post', 'path' ],\n  data() {\n    return {\n      sstate: store.state,\n      loading: true,\n      storedPost: {},\n      show: false\n    };\n  },\n  mounted() {\n    document.title = he.decode( this.title + ' | ' + this.sstate.site.title );\n    _wpapix.then( wpapix => {\n      var path = new wpapix.Path({ path: 'contact-us' });\n      path.fetch().done(( rpost ) => {\n        console.log( 'got contact page', rpost );\n        this.storedPost = rpost;\n      });\n    });\n    this.$nextTick(() => {\n      ScrollHeader.init( '#masthead', \"#app>.page>.featured-outer\" );\n      ContactForm.init();\n    });\n  },\n  updated() {\n    this.$nextTick(() => {\n      ScrollHeader.init( '#masthead', \"#app>.page>.featured-outer\" );\n      ContactForm.init();\n    });\n  },\n  methods: {\n    showImg() {\n      this.show = true;\n    },\n    postTitle( post ) {\n      return post.title && post.title.rendered || '';\n    },\n    postContent( post ) {\n      const user = this.sstate.user;\n      if ( post.member_content && ( user.as ? user.as.subscriber : user.membership ))\n        return post.member_content;\n      return post.content && post.content.rendered || '';\n    }\n  },\n  computed: {\n    postData() {\n      return this.post || this.storedPost;\n    },\n    title() {\n      return this.postData.title && this.postData.title.rendered || '';\n    },\n    posts() {\n      return this.postData.posts || [];\n    },\n    img() {\n      return this.postData.background_image || '';\n    },\n    content() {\n      const user = this.sstate.user;\n      if ( this.postData.member_content\n           && ( user.as ? user.as.subscriber : user.membership ))\n        return this.postData.member_content;\n      return this.postData.content && this.postData.content.rendered || '';\n    }\n  },\n  watch: {\n    $route( to, from ) {\n      // TODO: scroll to post (and maybe fetch)\n    }\n  }\n};\n","module.exports = \"<div class=\\\"contact post page\\\" :key=\\\"postData.id\\\">\\n  <div id=\\\"bg-image-wrapper\\\">\\n    <transition name=\\\"fade-in\\\" appear>\\n      <img id=\\\"bg-image\\\" :src=\\\"img\\\" :key=\\\"img\\\" @load=\\\"showImg\\\" v-show=\\\"show\\\"/>\\n    </transition>\\n  </div>\\n  <down-arrow></down-arrow>\\n  <div class=\\\"featured-outer small\\\">\\n  </div>\\n\\n  <main role=\\\"main\\\">\\n    <h1 class=\\\"title\\\" v-html=\\\"title\\\"></h1>\\n    <section class=\\\"description\\\" v-html=\\\"content\\\"></section>\\n    <section v-for=\\\"( post, index ) in posts\\\" :key=\\\"post.id\\\"\\n             class=\\\"post\\\">\\n      <h2 class=\\\"title fancy-title\\\" v-html=\\\"postTitle( post )\\\"></h2>\\n      <div class=\\\"content\\\" v-html=\\\"postContent( post )\\\"></div>\\n    </section>\\n  </main>\\n  <wp-footer></wp-footer>\\n</div>\\n\";","const ContactForm = {\n  last_scroll: 0,\n  scroll_dir: 'none'\n};\n\n(function ($) {\n  ContactForm.init = ( ) => {\n    var _ = ContactForm;\n    var $el = $( \".contact-form\" );\n    $el.off( 'submit' );\n    $el.on( 'submit', e => {\n      e.preventDefault();\n      var data = $( this ).serialize();\n      console.log( 'contact form submit', data );\n    });\n  };\n  ContactForm.destroy = () => {\n    $( \".contact-form\" ).off( 'submit' );\n  };\n})( jQuery );\n\nexport default ContactForm;\n","const ScrollHeader = {\n  last_scroll: 0,\n  scroll_dir: 'none'\n};\n\n(function ($) {\n  ScrollHeader.init = ( header, container ) => {\n    var _ = ScrollHeader;\n    var $el = $( \"#app>.page\" );\n    _.last_scroll = $el.scrollTop();\n    $el.off( 'scroll' );\n    $el.on( 'scroll', e => {\n      var last = _.last_scroll;\n      var dir = _.scroll_dir;\n      var cur = _.last_scroll = $el.scrollTop();\n      var $head = $( header );\n      \n      if ( last < cur ) {\n        if ( dir != (_.scroll_dir = 'down' ))\n          $head.stop().animate( { top: - $head.innerHeight() - 10 }, 'slow' );\n      } else if ( last > cur ) {\n        if ( dir != (_.scroll_dir = 'up' ))\n          $head.stop().animate( { top: 0 }, 'slow' );\n      } else\n        _.scroll_dir = 'none';\n      var topH = $( container ).innerHeight() - $head.innerHeight() + 20;\n      if ( cur > topH ) \n        $head.removeClass( 'mrk-bg-clear' ).addClass( 'mrk-bg-dark' );\n      else\n        $head.removeClass( 'mrk-bg-dark' ).addClass( 'mrk-bg-clear' );\n    });\n  };\n  ScrollHeader.destroy = () => {\n    $( \"#app>.page\" ).off( 'scroll' );\n  };\n})( jQuery );\n\nexport default ScrollHeader;\n"],"sourceRoot":""}