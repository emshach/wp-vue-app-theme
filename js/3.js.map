{"version":3,"sources":["webpack:///(webpack)/buildin/module.js","webpack:///./js/components/content-section/index.js","webpack:///./js/components/content-section/template.html","webpack:///./js/mixins/media-actions.js"],"names":["template","require","mixins","media_actions","props","title","type","String","default","episodes","Array","showEmpty","Boolean","coming","hideComing","labels","data","user","store","state","computed","filteredEpisodes","_","orderBy","filter","x","canWatchNow","restrictions","show","dateComing","methods","episode","as","rst","admin","public","subscriber","members","logged_in","auth","redirect","sayAction","trans","release_type","cardClasses","private","payperview","hidden","needsSubscription","getSources","Object","values","sources","videoPlayerOptions","defaults","opts","assign","controls","autoplay","playsinline","aspectRatio","controlBar","kgvid_meta","poster"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACe;AACbA,UAAQ,EAAEC,mBAAO,CAAE,sEAAF,CADJ;AAEbC,QAAM,EAAE,CAAEC,6DAAF,CAFK;AAGbC,OAAK,EAAE;AACLC,SAAK,EAAE;AACLC,UAAI,EAAEC,MADD;AAELC,aAAO,EAAE;AAFJ,KADF;AAKLC,YAAQ,EAAE;AACRH,UAAI,EAAEI,KADE;AAERF,aAAO,EAAE;AAAA,eAAM,EAAN;AAAA;AAFD,KALL;AASLG,aAAS,EAAE;AACTL,UAAI,EAAEM,OADG;AAETJ,aAAO,EAAE;AAFA,KATN;AAaLK,UAAM,EAAE;AACNP,UAAI,EAAEC,MADA;AAENC,aAAO,EAAE;AAFH,KAbH;AAiBLM,cAAU,EAAE;AACVR,UAAI,EAAEM,OADI;AAEVJ,aAAO,EAAE;AAFC,KAjBP;AAqBLO,UAAM,EAAE;AACNT,UAAI,EAAEM,OADA;AAENJ,aAAO,EAAE;AAFH;AArBH,GAHM;AA6BbQ,MA7Ba,kBA6BL;AACN,WAAO;AACLC,UAAI,EAAEC,kDAAK,CAACC,KAAN,CAAYF;AADb,KAAP;AAGD,GAjCY;AAkCbG,UAAQ,EAAE;AACRC,oBADQ,8BACW;AAAA;;AACjB,UAAIZ,QAAQ,GAAGa,6CAAC,CAACC,OAAF,CAAW,KAAKd,QAAhB,EAA0B,CAAE,gBAAF,CAA1B,EAAgD,CAAE,KAAF,CAAhD,CAAf;;AACA,aAAOA,QAAQ,CAACe,MAAT,CAAiB,UAAAC,CAAC;AAAA,eAAI,KAAI,CAACC,WAAL,CAAiBD,CAAjB,KAAuBA,CAAC,CAACE,YAAF,CAAeC,IAA1C;AAAA,OAAlB,CAAP;AACD,KAJO;AAKRC,cALQ,wBAKK;AACX,aAAO,KAAKhB,MAAL,GAAgB,QAAQ,KAAKA,MAA7B,GAAwC,MAA/C;AACD;AAPO;AAlCG,CAAf,E;;;;;;;;;;;ACHA,6gBAA6gB,wEAAwE,oPAAoP,yCAAyC,mMAAmM,8BAA8B,sHAAsH,4BAA4B,8GAA8G,6BAA6B,qHAAqH,4BAA4B,gHAAgH,gCAAgC,uHAAuH,+BAA+B,gFAAgF,4BAA4B,uHAAuH,2BAA2B,gHAAgH,gCAAgC,0HAA0H,+BAA+B,qzCAAqzC,8BAA8B,0MAA0M,cAAc,sC;;;;;;;;;;;;ACAz3H;AAAA;AAAA;AACe;AACbiB,SAAO,EAAE;AACPJ,eADO,uBACOK,OADP,EACiB;AACtB,UAAMd,IAAI,GAAGC,kDAAK,CAACC,KAAN,CAAYF,IAAzB;;AACA,UAAKA,IAAI,CAACe,EAAV,EAAe;AACb,YAAIA,EAAE,GAAIf,IAAI,CAACe,EAAf;AACA,YAAIC,GAAG,GAAGF,OAAO,CAACJ,YAAlB;AACA,YAAKK,EAAE,CAACE,KAAH,IAAYD,GAAG,CAACE,MAArB,EACE,OAAO,IAAP;AACF,YAAKH,EAAE,CAACI,UAAH,IAAiBH,GAAG,CAACI,OAA1B,EACE,OAAO,IAAP;AACF,YAAKL,EAAE,CAACM,SAAH,IAAgBL,GAAG,CAACM,IAAzB,EACE,OAAO,IAAP;AACF,eAAO,KAAP;AACD;;AACD,aAAO,CAACR,OAAO,CAACS,QAAhB;AACD,KAfM;AAgBPC,aAhBO,qBAgBIV,OAhBJ,EAgBaW,KAhBb,EAgBqB;AAC1B,aAASX,OAAO,CAACY,YAAR,IAAwB,OAAxB,GAAkC,OAAlC,GACEZ,OAAO,CAACY,YAAR,IAAwB,OAAxB,GACED,KAAK,GAAG,WAAH,GAAiB,QADxB,GAEA,MAHX;AAID,KArBM;AAsBPE,eAtBO,uBAsBMb,OAtBN,EAsBgB;AACrB,UAAK,CAACA,OAAD,IAAY,CAACA,OAAO,CAACJ,YAA1B,EACE,OAAO,EAAP;AACF,aAAO;AACLkB,eAAO,EAAEd,OAAO,CAACJ,YAAR,CAAqBkB,OADzB;AAELV,cAAM,EAAEJ,OAAO,CAACJ,YAAR,CAAqBQ,MAFxB;AAGLI,YAAI,EAAER,OAAO,CAACJ,YAAR,CAAqBY,IAHtB;AAILO,kBAAU,EAAEf,OAAO,CAACJ,YAAR,CAAqBmB,UAJ5B;AAKLT,eAAO,EAAEN,OAAO,CAACJ,YAAR,CAAqBU,OALzB;AAMLU,cAAM,EAAE,CAAChB,OAAO,CAACJ,YAAR,CAAqBC,IAAtB,IAA8B,CAACG,OAAO,CAACJ,YAAR,CAAqBQ;AANvD,OAAP;AAQD,KAjCM;AAkCPa,qBAlCO,6BAkCajB,OAlCb,EAkCuB;AAC5B,UAAMd,IAAI,GAAGC,kDAAK,CAACC,KAAN,CAAYF,IAAzB;AACA,aAASc,OAAO,CAACJ,YAAR,CAAqBU,OAArB,KAAkC,CAACpB,IAAI,CAACe,EAAN,IAAY,CAACf,IAAI,CAACe,EAAL,CAAQI,UAAvD,CAAT;AACD,KArCM;AAsCPa,cAtCO,sBAsCKlB,OAtCL,EAsCe;AACpB,aAAOmB,MAAM,CAACC,MAAP,CAAepB,OAAO,CAACqB,OAAvB,CAAP;AACD,KAxCM;AAyCPC,sBAzCO,8BAyCatB,OAzCb,EAyCsBuB,QAzCtB,EAyCiC;AACtC,UAAIC,IAAI,GAAGL,MAAM,CAACM,MAAP,CAAe;AACxBC,gBAAQ,EAAE,IADc;AAExBC,gBAAQ,EAAE,KAFc;AAGxBC,mBAAW,EAAE,IAHW;AAIxBC,mBAAW,EAAE,MAJW;AAKxBC,kBAAU,EAAE,CACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZU;AALY,OAAf,EAmBRP,QAAQ,IAAI,EAnBJ,CAAX;AAoBA,UAAKvB,OAAO,CAAC+B,UAAR,IAAsB/B,OAAO,CAAC+B,UAAR,CAAmBC,MAA9C,EACER,IAAI,CAACQ,MAAL,GAAchC,OAAO,CAAC+B,UAAR,CAAmBC,MAAjC;AACFR,UAAI,CAACH,OAAL,GAAe,KAAKH,UAAL,CAAiBlB,OAAjB,CAAf;AACA,aAAOwB,IAAP;AACH;AAlEQ;AADI,CAAf,E","file":"3.js","sourcesContent":["module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import store from '../../lib/store';\nimport media_actions from '../../mixins/media-actions';\nimport _ from 'lodash';\nexport default {\n  template: require( './template.html' ),\n  mixins: [ media_actions ],\n  props: {\n    title: {\n      type: String,\n      default: \"Episodes\"\n    },\n    episodes: {\n      type: Array,\n      default: () => []\n    },\n    showEmpty: {\n      type: Boolean,\n      default: true\n    },\n    coming: {\n      type: String,\n      default: ''\n    },\n    hideComing: {\n      type: Boolean,\n      default: false\n    },\n    labels: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data () {\n    return {\n      user: store.state.user\n    };\n  },\n  computed: {\n    filteredEpisodes() {\n      var episodes = _.orderBy( this.episodes, [ 'release_number' ], [ 'asc' ]);\n      return episodes.filter( x => this.canWatchNow(x) || x.restrictions.show );\n    },\n    dateComing() {\n      return this.coming ? ( 'in ' + this.coming ) : 'Soon';\n    }\n  },\n};\n","module.exports = \"<section class=\\\"episodes\\\">\\n  <template v-if=\\\"filteredEpisodes.length || showEmpty\\\">\\n    <h2 class=\\\"title\\\" v-html=\\\"title\\\"></h2>\\n    <transition-group name=\\\"fade-fast\\\">\\n      <b-card v-for=\\\"( episode, index ) in filteredEpisodes\\\" :key=\\\"episode.id\\\"\\n              :class=\\\"[ 'media-insert', cardClasses( episode )]\\\">\\n        <b-media no-body>\\n          <b-media-aside>\\n            <b-img :src=\\\"episode.thumbnail\\\" width=\\\"128\\\" height=\\\"96\\\" />\\n            <div class=\\\"info length\\\">{{\\n              episode.media_details.length_formatted\\n              }}</div>\\n          </b-media-aside>\\n          <b-media-body>\\n            <h5 v-if=\\\"labels && episode.release_number\\n                      && typeof episode.release_number == 'number'\\\"\\n                class=\\\"mt-0 episode-num\\\">Programme {{\\n              episode.release_number }}</h5>\\n            <h5 class=\\\"mt-0\\\" v-html=\\\"episode.title.rendered\\\"></h5>\\n            <div class=\\\"info row\\\">\\n              <div :class=\\\"[ 'views', 'd-flex',\\n                           { active : episode.my_xp.seen }]\\\">\\n                <span class=\\\"dashicons dashicons-visibility\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.views || 0 }}</span>\\n              </div>\\n              <div :class=\\\"[ 'likes',  'd-flex',\\n                           { active: episode.my_xp.like }]\\\">\\n                <span class=\\\"dashicons dashicons-thumbs-up\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.likes || 0 }}</span>\\n              </div>\\n              <div :class=\\\"[ 'dislikes', 'd-flex',\\n                           { active: episode.my_xp.dislike }]\\\">\\n                <span class=\\\"dashicons dashicons-thumbs-down\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.dislikes || 0 }}</span>\\n              </div>\\n              <div :class=\\\"[ 'favs', 'd-flex', { active: episode.my_xp.fav }]\\\">\\n                <span class=\\\"dashicons dashicons-star-filled\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.favs || 0 }}</span>\\n              </div>\\n              <div :class=\\\"[ 'comments', 'd-flex',\\n                           { active: episode.my_xp.comment }]\\\">\\n                <span class=\\\"dashicons dashicons-admin-comments\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.comments || 0 }}</span>\\n              </div>\\n              <template v-if=\\\"user.as && user.as.admin\\\">\\n                <div v-if=\\\"episode.restrictions.private\\\"\\n                     class=\\\"d-flex admin\\\">private</div>\\n                <div v-if=\\\"episode.restrictions.public\\\"\\n                     class=\\\"d-flex admin\\\">public</div>\\n                <div v-if=\\\"episode.restrictions.auth\\\"\\n                     class=\\\"d-flex admin\\\">logged-in</div>\\n                <div v-if=\\\"episode.restrictions.payperview\\\"\\n                     class=\\\"d-flex admin\\\">payperview</div>\\n                <div v-if=\\\"episode.restrictions.members\\\"\\n                     class=\\\"d-flex admin\\\">subscribers</div>\\n                <div v-if=\\\"!episode.restrictions.show\\n                           && !episode.restrictions.public\\\"\\n                     class=\\\"d-flex admin\\\">hidden</div>\\n                <!-- <div v-if=\\\"episode.restrictions.premium\\\"\\n                     class=\\\"d-flex admin\\\">premium</div> -->\\n              </template>\\n            </div>\\n            <div v-html=\\\"episode.caption.rendered\\\"></div>\\n            <watch-button :target=\\\"episode\\\"></watch-button>\\n            <b-btn v-if=\\\"episode.preview\\\" class=\\\"watch watch-preview\\\" size=\\\"lg\\\"\\n                   :to=\\\"episode.preview\\\" variant=\\\"link\\\">\\n              {{ sayAction( episode, true ) }} preview</b-btn>\\n          </b-media-body>\\n        </b-media>\\n      </b-card>\\n    </transition-group>\\n    <div v-if=\\\"!filteredEpisodes.length && !hideComing\\\"\\n         class=\\\"message\\\">Coming {{ dateComing }}!</div>\\n  </template>\\n</section>\\n\";","import store from '../lib/store';\nexport default {\n  methods: {\n    canWatchNow ( episode ) {\n      const user = store.state.user;\n      if ( user.as ) {\n        var as  = user.as;\n        var rst = episode.restrictions;\n        if ( as.admin || rst.public )\n          return true;\n        if ( as.subscriber && rst.members )\n          return true;\n        if ( as.logged_in && rst.auth )\n          return true;\n        return false;\n      }\n      return !episode.redirect;\n    },\n    sayAction( episode, trans ) {\n      return ( episode.release_type == 'video' ? 'watch'\n               : episode.release_type == 'audio'\n               ? ( trans ? 'listen to' : 'listen' )\n               : 'view' );\n    },\n    cardClasses( episode ) {\n      if ( !episode || !episode.restrictions )\n        return {};\n      return {\n        private: episode.restrictions.private,\n        public: episode.restrictions.public,\n        auth: episode.restrictions.auth,\n        payperview: episode.restrictions.payperview,\n        members: episode.restrictions.members,\n        hidden: !episode.restrictions.show && !episode.restrictions.public\n      };\n    },\n    needsSubscription ( episode ) {\n      const user = store.state.user;\n      return ( episode.restrictions.members && ( !user.as || !user.as.subscriber ));\n    },\n    getSources( episode ) {\n      return Object.values( episode.sources );\n    },\n    videoPlayerOptions( episode, defaults ) {\n      var opts = Object.assign( {\n        controls: true,\n        autoplay: false,\n        playsinline: true,\n        aspectRatio: \"16:9\",\n        controlBar: {\n          // children: [\n          //   'playToggle',\n          //   'volumeMenuButton',\n          //   'currentTimeDisplay',\n          //   'durationDisplay',\n          //   'progressControl',\n          //   'remainingTimeDisplay',\n          //   'playbackRateMenuButton',\n          //   'subtitlesButton',\n          //   'captionsButton',\n          //   'fullscreenToggle'\n          // ],\n        }\n      }, defaults || {});\n      if ( episode.kgvid_meta && episode.kgvid_meta.poster )\n        opts.poster = episode.kgvid_meta.poster;\n      opts.sources = this.getSources( episode );\n      return opts;\n  }\n  }\n};\n"],"sourceRoot":""}