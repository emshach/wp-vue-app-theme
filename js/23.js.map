{"version":3,"sources":["webpack:///./js/components/program/index.js","webpack:///./js/components/program/template.html"],"names":["template","require","props","data","sstate","store","state","storedPost","promos","show","mounted","_wpapix","then","wpapix","path","Path","console","log","fetch","done","rpost","document","title","he","decode","rendered","site","window","setTimeout","promo_reel","updated","methods","showImg","computed","postData","post","img","background_image","promos_reel","episodes","releases","episodesTitle","title_releases","archives","archivesTitle","title_archives","content","user","member_content","as","subscriber","membership","classes","small","length"],"mappings":"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","file":"23.js","sourcesContent":["import store from '../../lib/store';\nimport _wpapix from '../../lib/wpapix';\nimport he from 'he';\nexport default {\n  template: require( './template.html' ),\n  props: [ 'post' ],\n  data() {\n    return {\n      sstate: store.state,\n      storedPost: {},\n      promos: [],\n      show: false\n    };\n  },\n  mounted() {\n    _wpapix.then( wpapix => {\n      var path = new wpapix.Path({ path: '/members' });\n      console.log( 'path object', path );\n      path.fetch().done(( rpost ) => {\n        console.log( 'got members page', rpost );\n        this.storedPost = rpost;\n        document.title = he.decode( rpost.title.rendered + ' | '\n                                    + this.sstate.site.title );\n        window.setTimeout(() => {\n          this.promos = rpost.promo_reel || [];\n        }, 3000 );\n      });\n    });\n  },\n  updated() {\n    document.title = he.decode( this.title + ' | ' + this.sstate.site.title );\n  },\n  methods: {\n    showImg() {\n      this.show = true;\n    }\n  },\n  computed: {\n    postData() {\n      return this.post || this.storedPost;\n    },\n    title() {\n      return this.postData.title && this.postData.title.rendered || '';\n    },\n    img() {\n      return this.postData.background_image || '';\n    },\n    promos_reel() {\n      return this.postData.promo_reel || [];\n    },\n    episodes() {\n      return this.postData.releases || [];\n    },\n    episodesTitle() {\n      return this.postData.title_releases || 'Programmes';\n    },\n    archives() {\n      return this.postData.archives || [];\n    },\n    archivesTitle() {\n      return this.postData.title_archives || 'From the Archives';\n    },\n    content() {\n      const user = this.sstate.user;\n      if ( this.postData.member_content\n           && ( user.as ? user.as.subscriber : user.membership ))\n        return this.postData.member_content;\n      return this.postData.content && this.postData.content.rendered || '';\n    },\n    classes() {\n      return { small: !!this.promos.length };\n    }\n  }\n};\n","module.exports = \"<div class=\\\"program post page\\\" :key=\\\"postData.id\\\">\\n  <div id=\\\"bg-image-wrapper\\\" :class=\\\"classes\\\">\\n    <transition name=\\\"fade-in\\\" appear>\\n      <img id=\\\"bg-image\\\" :src=\\\"img\\\" :key=\\\"img\\\" @load=\\\"showImg\\\" v-show=\\\"show\\\"/>\\n    </transition>\\n  </div>\\n  <wp-header></wp-header>\\n  <down-arrow></down-arrow>\\n  <div class=\\\"featured-outer\\\">\\n    <transition name=\\\"fade-in\\\">\\n      <div v-if=\\\"promos.length\\\" class=\\\"featured-wrapper\\\">\\n        <mrk-carousel id=\\\"featured\\\" :slides=\\\"promos\\\"></mrk-carousel>\\n      </div>\\n    </transition>\\n  </div>\\n\\n  <main role=\\\"main\\\">\\n    <h1 class=\\\"title\\\" v-html=\\\"title\\\"></h1>\\n    <section class=\\\"description\\\" v-html=\\\"content\\\"></section>\\n    <content-section :title=\\\"episodesTitle\\\" :coming=\\\"postData.release_date\\\"\\n                     :labels=\\\"postData.episode_labels\\\"\\n                     :episodes=\\\"episodes\\\"></content-section>\\n    <content-section :title=\\\"archivesTitle\\\" :episodes=\\\"archives\\\"\\n                     :labels=\\\"postData.episode_labels\\\"\\n                     :show-empty=\\\"false\\\"></content-section>\\n    <comments></comments>\\n  </main>\\n  <wp-footer></wp-footer>\\n</div>\\n\";"],"sourceRoot":""}