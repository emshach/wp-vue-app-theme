{"version":3,"sources":["webpack:///./js/components/content-section/index.js","webpack:///./js/components/content-section/template.html"],"names":["template","require","props","title","type","String","default","episodes","Array","showEmpty","Boolean","data","user","store","state","computed","filteredEpisodes","filter","x","canWatchNow","restrictions","show","methods","episode","as","rst","admin","public","subscriber","members","logged_in","auth","redirect","needsSubscription"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AACe;AACbA,UAAQ,EAAEC,mBAAO,CAAE,sEAAF,CADJ;AAEbC,OAAK,EAAE;AACLC,SAAK,EAAE;AACLC,UAAI,EAAEC,MADD;AAELC,aAAO,EAAE;AAFJ,KADF;AAKLC,YAAQ,EAAE;AACRH,UAAI,EAAEI,KADE;AAERF,aAAO,EAAE;AAAA,eAAM,EAAN;AAAA;AAFD,KALL;AASLG,aAAS,EAAE;AACTL,UAAI,EAAEM,OADG;AAETJ,aAAO,EAAE;AAFA;AATN,GAFM;AAgBbK,MAhBa,kBAgBL;AACN,WAAO;AACLC,UAAI,EAAEC,kDAAK,CAACC,KAAN,CAAYF;AADb,KAAP;AAGD,GApBY;AAqBbG,UAAQ,EAAE;AACRC,oBADQ,8BACW;AAAA;;AACjB,aAAO,KAAKT,QAAL,CAAcU,MAAd,CAAsB,UAAAC,CAAC;AAAA,eAAI,KAAI,CAACC,WAAL,CAAiBD,CAAjB,KAAuBA,CAAC,CAACE,YAAF,CAAeC,IAA1C;AAAA,OAAvB,CAAP;AACD;AAHO,GArBG;AA0BbC,SAAO,EAAE;AACPH,eADO,uBACOI,OADP,EACiB;AACtB,UAAK,KAAKX,IAAL,CAAUY,EAAf,EAAoB;AAClB,YAAIA,EAAE,GAAI,KAAKZ,IAAL,CAAUY,EAApB;AACA,YAAIC,GAAG,GAAGF,OAAO,CAACH,YAAlB;AACA,YAAKI,EAAE,CAACE,KAAH,IAAYD,GAAG,CAACE,MAArB,EACE,OAAO,IAAP;AACF,YAAKH,EAAE,CAACI,UAAH,IAAiBH,GAAG,CAACI,OAA1B,EACE,OAAO,IAAP;AACF,YAAKL,EAAE,CAACM,SAAH,IAAgBL,GAAG,CAACM,IAAzB,EACE,OAAO,IAAP;AACF,eAAO,KAAP;AACD;;AACD,aAAO,CAAC,CAACR,OAAO,CAACS,QAAjB;AACD,KAdM;AAePC,qBAfO,6BAeaV,OAfb,EAeuB;AAC5B,aAASA,OAAO,CAACH,YAAR,CAAqBS,OAArB,KACK,CAAC,KAAKjB,IAAL,CAAUY,EAAX,IAAiB,CAAC,KAAKZ,IAAL,CAAUY,EAAV,CAAaI,UADpC,CAAT;AAED;AAlBM;AA1BI,CAAf,E;;;;;;;;;;;ACDA,ycAAyc,wEAAwE,0PAA0P,8BAA8B,sHAAsH,4BAA4B,8GAA8G,6BAA6B,qHAAqH,4BAA4B,gHAAgH,gCAAgC,uHAAuH,+BAA+B,gFAAgF,4BAA4B,uHAAuH,2BAA2B,gHAAgH,gCAAgC,0HAA0H,+BAA+B,yaAAya,2BAA2B,sBAAsB,+e","file":"8.js","sourcesContent":["import store from '../../lib/store';\nexport default {\n  template: require( './template.html' ),\n  props: {\n    title: {\n      type: String,\n      default: \"Episodes\"\n    },\n    episodes: {\n      type: Array,\n      default: () => []\n    },\n    showEmpty: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data () {\n    return {\n      user: store.state.user\n    };\n  },\n  computed: {\n    filteredEpisodes() {\n      return this.episodes.filter( x => this.canWatchNow(x) || x.restrictions.show );\n    }\n  },\n  methods: {\n    canWatchNow ( episode ) {\n      if ( this.user.as ) {\n        var as  = this.user.as;\n        var rst = episode.restrictions;\n        if ( as.admin || rst.public )\n          return true;\n        if ( as.subscriber && rst.members )\n          return true;\n        if ( as.logged_in && rst.auth )\n          return true;\n        return false;\n      }\n      return !!episode.redirect;\n    },\n    needsSubscription ( episode ) {\n      return ( episode.restrictions.members\n               && ( !this.user.as || !this.user.as.subscriber ));\n    }\n  }\n};\n","module.exports = \"<section class=\\\"episodes\\\">\\n  <template v-if=\\\"filteredEpisodes.length || showEmpty\\\">\\n    <h2 class=\\\"title\\\" v-html=\\\"title\\\"></h2>\\n    <transition-group name=\\\"fade-fast\\\">\\n      <b-card v-for=\\\"( episode, index ) in filteredEpisodes\\\" :key=\\\"episode.id\\\">\\n        <b-media no-body>\\n          <b-media-aside>\\n            <b-img :src=\\\"episode.thumbnail\\\" width=\\\"128\\\" height=\\\"96\\\" />\\n            <div class=\\\"info length\\\">{{\\n              episode.media_details.length_formatted\\n              }}</div>\\n          </b-media-aside>\\n          <b-media-body>\\n            <h5 class=\\\"mt-0\\\" v-html=\\\"episode.title.rendered\\\"></h5>\\n            <div class=\\\"info row\\\">\\n              <div :class=\\\"[ 'views', 'd-flex',\\n                           { active : episode.my_xp.seen }]\\\">\\n                <span class=\\\"dashicons dashicons-visibility\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.views || 0 }}</span>\\n              </div>\\n              <div :class=\\\"[ 'likes',  'd-flex',\\n                           { active: episode.my_xp.like }]\\\">\\n                <span class=\\\"dashicons dashicons-thumbs-up\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.likes || 0 }}</span>\\n              </div>\\n              <div :class=\\\"[ 'dislikes', 'd-flex',\\n                           { active: episode.my_xp.dislike }]\\\">\\n                <span class=\\\"dashicons dashicons-thumbs-down\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.dislikes || 0 }}</span>\\n              </div>\\n              <div :class=\\\"[ 'favs', 'd-flex', { active: episode.my_xp.fav }]\\\">\\n                <span class=\\\"dashicons dashicons-star-filled\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.favs || 0 }}</span>\\n              </div>\\n              <div :class=\\\"[ 'comments', 'd-flex',\\n                           { active: episode.my_xp.comment }]\\\">\\n                <span class=\\\"dashicons dashicons-admin-comments\\\"></span>\\n                <span class=\\\"count\\\">{{ episode.stats.comments || 0 }}</span>\\n              </div>\\n            </div>\\n            <div v-html=\\\"episode.caption.rendered\\\"></div>\\n            <b-btn v-if=\\\"canWatchNow( episode )\\\" :to=\\\"episode.path\\\" size=\\\"lg\\\"\\n                   class=\\\"watch watch-now\\\" variant=\\\"primary\\\">watch now</b-btn>\\n            <b-btn v-else-if=\\\"needsSubscription( episode )\\\" size=\\\"lg\\\"\\n                   :to=\\\"episode.preview\\n                        ||{ path: '/members', query: { then: episode.path }}\\\"\\n                   class=\\\"watch subscribe-to-watch\\\"\\n                   variant=\\\"warning\\\">subscribe to watch</b-btn>\\n            <b-btn v-if=\\\"episode.preview\\\" class=\\\"watch watch-preview\\\" size=\\\"lg\\\"\\n                   :to=\\\"episode.preview\\\" variant=\\\"link\\\">watch preview</b-btn>\\n          </b-media-body>\\n        </b-media>\\n      </b-card>\\n    </transition-group>\\n    <div class=\\\"message\\\" v-if=\\\"!filteredEpisodes.length\\\">Coming Soon!</div>\\n  </template>\\n</section>\\n\";"],"sourceRoot":""}