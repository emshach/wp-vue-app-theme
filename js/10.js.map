{"version":3,"sources":["webpack:///./js/components/mrk-carousel/index.js","webpack:///./js/components/mrk-carousel/template.html","webpack:///./js/mixins/media-actions.js"],"names":["carousels","template","require","mixins","media_actions","props","topic","type","String","default","slides","Array","id","background","interval","Number","data","loading","autoplayTimeout","goto","slide","sliding","players","played","ready","waiting","playing","currentPlaying","mounted","getSlides","console","log","$refs","length","window","setInterval","rendered","updatePlayers","updated","methods","p","indexOf","player","index","substr","id_","pageChanged","page","oldPlayer","newPlayer","pause","transitionEnded","setTimeout","retries","tryplay","play","catch","playerPlayed","playerPaused","playerEnded","playerWaiting","playerPlaying","playerDataLoaded","playerTimeupdated","playerPlayEnabled","slidePlayer","playerPlaythroughEnabled","playerStateChanged","playerReadied","watch","canWatchNow","episode","user","store","state","as","rst","restrictions","admin","public","subscriber","members","logged_in","auth","redirect","sayAction","trans","release_type","cardClasses","private","payperview","hidden","show","needsSubscription","getSources","Object","values","sources","videoPlayerOptions","defaults","opts","assign","controls","autoplay","playsinline","aspectRatio","controlBar","kgvid_meta","poster"],"mappings":"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","file":"10.js","sourcesContent":["import media_actions from '../../mixins/media-actions';\nvar carousels = 0;\nexport default {\n  template: require( './template.html' ),\n  mixins: [ media_actions ],\n  props: {\n    topic: {\n      type: String,\n      default: \"\"\n    },\n    slides: {\n      type: Array,\n      default: () => []\n    },\n    id: {\n      type: String,\n      default: () => \"carousel-\" + ++carousels\n    },\n    background: {\n      type: String,\n      default: \"transparent\"\n    },\n    interval: {\n      type: Number,\n      default: 15000\n    }\n  },\n  data() {\n    return {\n      loading: true,\n      autoplayTimeout: 15000,\n      goto: 0,\n      slide: 0,\n      sliding: null,\n      players: {},\n      played: {},\n      ready: {},\n      waiting: {},\n      playing: {},\n      currentPlaying: false\n      // options: {\n      //   pagination: {\n      //     direction: 'horizontal',\n      //     el: '.swiper-pagination',\n      //     speed: 15000,\n      //     loop: true\n      //   }\n      // }\n    };\n  },\n  mounted() {\n    this.getSlides();\n    console.log( this.$refs );\n    if ( this.slides.length > 1 ) {\n      window.setInterval(() => {\n        if ( !this.currentPlaying ) {\n          this.goto = ( this.goto + 1 ) % this.slides.length;\n        }\n      }, this.interval );\n    }\n  },\n  rendered() {\n    this.updatePlayers();\n  },\n  updated() {\n    this.updatePlayers();\n  },\n  methods: {\n    getSlides() {\n      if (! this.slides.length && this.topic ) {\n        // TODO: search using topic, get posts\n      }\n    },\n    updatePlayers() {\n      var players = {};\n      for ( var p in this.$refs ) {\n        if ( p.indexOf( 'player' ) != 0 )\n          continue;\n        var player = this.$refs[p][0];\n        var index = p.substr(6);\n        players[ player.id_ ] = index;\n      }\n      for ( p in this.players ) {\n        if (!( p in players )) { // then it got drawn-over\n          delete this.waiting[p];\n          delete this.ready[p];\n          delete this.playing[p];\n          delete this.played[p];\n          if ( this.currentPlaying == p )\n            this.currentPlaying = false;\n        }\n      }\n      this.players = players;\n    },\n    // events\n    pageChanged( page ) {\n      console.log( 'pageChanged', page );\n      this.sliding = true;\n      var slide = this.slide;\n      var oldPlayer = this.$refs[ 'player' + slide ];\n      var newPlayer = this.$refs[ 'player' + page ];\n      if ( oldPlayer ) oldPlayer = oldPlayer[0];\n      if ( newPlayer ) newPlayer = newPlayer[0];\n      console.log( 'oldPlayer', slide, oldPlayer, oldPlayer.player.id_ );\n      console.log( 'newPlayer', page, newPlayer, newPlayer.player.id_ );\n      this.slide = page;\n      if ( this.playing[ oldPlayer.player.id_ ]) {\n        oldPlayer.player.pause();\n        this.playing[ oldPlayer.player.id_ ] = false;\n        this.currentPlaying = false;\n      }\n    },\n    transitionEnded() {\n      console.log( 'transitionEnded' );\n      this.sliding = false;\n      window.setTimeout(() => {\n        var player = this.$refs[ 'player' + this.slide ];\n        if ( !player || !player[0] ) return;    // only play present players\n        player = player[0].player;\n        console.log( 'player', this.slide, player, player.id_ );\n        if ( this.ready[ player.id_ ]) {\n          if ( !this.played[ player.id_ ]) {\n            var retries = 0;\n            var tryplay;\n            tryplay = () => {\n              if ( ++retries > 3 ) return;\n              console.log( 'try #', retries );\n              window.setTimeout(() => {\n                player.play().catch( tryplay );\n              }, 1000 );\n            };\n            player.play().catch( tryplay );\n          }\n        } else {\n          this.waiting[ player.id_ ] = true;\n        }\n      }, 1000 );\n    },\n    // event handlers\n    playerPlayed( player ) {\n      console.log( 'playerPlayed', player, player.id_ );\n      this.played[ player.id_ ] = true;\n      this.playing[ player.id_ ] = true;\n      this.currentPlaying = player;\n    },\n    playerPaused( player ) {\n      console.log( 'playerPaused', player, player.id_ );\n      this.playing[ player.id_ ] = false;\n    },\n    playerEnded( player ) {\n      console.log( 'playerEnded', player, player.id_ );\n      this.playing[ player.id_ ] = false;\n      this.currentPlaying = false;\n    },\n    playerWaiting( player ) {\n      // console.log( 'playerWaiting', player, player.id_ );\n    },\n    playerPlaying( player ) {\n      // console.log( 'playerPlaying', player, player.id_ );\n    },\n    playerDataLoaded( player ) {\n      // console.log( 'playerDataLoaded', player, player.id_ );\n    },\n    playerTimeupdated( player ) {\n      // console.log( 'playerTimeupdated', player, player.id_ );\n    },\n    playerPlayEnabled( player ) {\n      console.log( 'playerPlayEnabled', player, player.id_ );\n      this.ready[ player.id_ ] = true;\n      var slidePlayer = this.$refs[ 'player' + this.slide ];\n      if ( !slidePlayer || !slidePlayer[0] || slidePlayer[0].player != player )\n        return;\n      if ( this.waiting[ player.id_ ] && !this.played[ player.id_ ]) {\n        this.waiting[ player.id_ ] = false;\n        player.play();\n      }\n    },\n    playerPlaythroughEnabled( player ) {\n      // console.log( 'playerPlaythroughEnabled', player, player.id_ );\n    },\n    playerStateChanged( player ) {\n      // console.log( 'playerStateChanged', player, player.id_ );\n    },\n    playerReadied( player ) {\n      // console.log( 'playerReadied', player, player.id_ );\n    }\n  },\n  watch: {\n    goto( slide ) {\n      this.pageChanged( slide );\n    }\n  }\n};\n","module.exports = \"<carousel :autoplay=\\\"false\\\"\\n          :per-page=\\\"1\\\"\\n          :loop=\\\"true\\\"\\n          v-model=\\\"goto\\\"\\n          pagination-color=\\\"#000\\\"\\n          pagination-active-color=\\\"#fff\\\"\\n          id=\\\"featured\\\"\\n          @pageChange=\\\"pageChanged\\\"\\n          @transitionEnd=\\\"transitionEnded\\\">\\n  <slide v-for=\\\"( slide, index ) in slides\\\" :key=\\\"slide.id\\\">\\n    <div class=\\\"container\\\">\\n      <div class=\\\"row\\\">\\n        <div :class=\\\"[ 'mrk-media-wrapper', 'col', 'col-12',\\n                       { 'col-md-8': slide.show_text }]\\\">\\n          <template v-if=\\\"slide.type == 'attachment'\\\">\\n            <img v-if=\\\"slide.release_type == 'image'\\\" :src=\\\"slide.source_url\\\"\\n                 class=\\\"mrk-media\\\" />\\n            <video-player v-else-if=\\\"slide.release_type == 'video'\\\"\\n                          :ref=\\\"'player'+index\\\"\\n                          class=\\\"mrk-media video-player-box vjs-big-play-centered\\\"\\n                          :playsinline=\\\"true\\\"\\n                          :options=\\\"videoPlayerOptions( slide )\\\"\\n                          @play=\\\"playerPlayed\\\"\\n                          @pause=\\\"playerPaused\\\"\\n                          @ended=\\\"playerEnded\\\"\\n                          @waiting=\\\"playerWaiting\\\"\\n                          @playing=\\\"playerPlaying\\\"\\n                          @loadeddata=\\\"playerDataLoaded\\\"\\n                          @timeupdate=\\\"playerTimeupdated\\\"\\n                          @canplay=\\\"playerPlayEnabled\\\"\\n                          @canplaythrough=\\\"playerPlaythroughEnabled\\\"\\n                          @statechanged=\\\"playerStateChanged\\\"\\n                          @ready=\\\"playerReadied\\\">\\n            </video-player>\\n            <audio  v-else-if=\\\"slide.release_type == 'audio'\\\"\\n                   :src=\\\"slide.source_url\\\" class=\\\"mrk-media\\\" controls\\n                   controlsList=\\\"nodownload\\\">\\n              {{ slide.alt_text }}\\n            </audio>\\n          </template>\\n        </div>\\n        <div v-if=\\\"slide.show_text\\\" class=\\\"col col-12 col-md-4\\\">\\n          <h2 v-if=\\\"slide.title\\\" v-html=\\\"slide.title.rendered\\\"></h2>\\n          <div v-if=\\\"slide.excerpt\\\" class=\\\"excerpt\\\"\\n               v-html=\\\"slide.excerpt.rendered\\\"></div>\\n          <div v-else-if=\\\"slide.caption\\\" class=\\\"caption\\\"\\n               v-html=\\\"slide.caption.rendered\\\"></div>\\n          <!-- <div v-if=\\\"slide.description\\\" class=\\\"description\\\" -->\\n          <!--      v-html=\\\"slide.description.rendered\\\"></div> -->\\n          <router-link v-if=\\\"slide.read_more\\\"\\n                       :to=\\\"slide.full_content.path\\\"\\n                       class=\\\"read-more\\\">read_more</router-link>\\n          <b-btn v-if=\\\"slide.full_content\\n                       && canWatchNow( slide.full_content )\\\"\\n                 variant=\\\"primary\\\" :to=\\\"slide.full_content.path\\\" size=\\\"lg\\\"\\n                 class=\\\"float-right\\\">{{\\n            sayAction( slide.full_content )}} now</b-btn>\\n          <b-btn v-else variant=\\\"warning\\\"\\n                 size=\\\"lg\\\" class=\\\"float-right\\\"\\n                 v-scroll-to=\\\"{ el: 'main', container: '.page',\\n                              x: false, y: true }\\\">\\n            subscribe for full content</b-btn>\\n        </div>\\n        <!-- TODO: if paid content, this link should be different, maybe it's\\n             own component -->\\n      </div>\\n    </div>\\n  </slide>\\n  <slide v-if=\\\"slides.length == 0\\\">\\n    <flower-spinner :animation-duration=\\\"2500\\\" :size=\\\"70\\\" color=\\\"#025\\\">\\n    </flower-spinner>\\n  </slide>\\n</carousel>\\n\";","import store from '../lib/store';\nexport default {\n  methods: {\n    canWatchNow ( episode ) {\n      const user = store.state.user;\n      if ( user.as ) {\n        var as  = user.as;\n        var rst = episode.restrictions;\n        if ( as.admin || rst.public )\n          return true;\n        if ( as.subscriber && rst.members )\n          return true;\n        if ( as.logged_in && rst.auth )\n          return true;\n        return false;\n      }\n      return !episode.redirect;\n    },\n    sayAction( episode, trans ) {\n      return ( episode.release_type == 'video' ? 'watch'\n               : episode.release_type == 'audio'\n               ? ( trans ? 'listen to' : 'listen' )\n               : 'view' );\n    },\n    cardClasses( episode ) {\n      if ( !episode || !episode.restrictions )\n        return {};\n      return {\n        private: episode.restrictions.private,\n        public: episode.restrictions.public,\n        auth: episode.restrictions.auth,\n        payperview: episode.restrictions.payperview,\n        members: episode.restrictions.members,\n        hidden: !episode.restrictions.show && !episode.restrictions.public\n      };\n    },\n    needsSubscription ( episode ) {\n      const user = store.state.user;\n      return ( episode.restrictions.members && ( !user.as || !user.as.subscriber ));\n    },\n    getSources( episode ) {\n      return Object.values( episode.sources );\n    },\n    videoPlayerOptions( episode, defaults ) {\n      var opts = Object.assign( {\n        controls: true,\n        autoplay: false,\n        playsinline: true,\n        aspectRatio: \"16:9\",\n        controlBar: {\n          // children: [\n          //   'playToggle',\n          //   'volumeMenuButton',\n          //   'currentTimeDisplay',\n          //   'durationDisplay',\n          //   'progressControl',\n          //   'remainingTimeDisplay',\n          //   'playbackRateMenuButton',\n          //   'subtitlesButton',\n          //   'captionsButton',\n          //   'fullscreenToggle'\n          // ],\n        }\n      }, defaults || {});\n      if ( episode.kgvid_meta && episode.kgvid_meta.poster )\n        opts.poster = episode.kgvid_meta.poster;\n      opts.sources = this.getSources( episode );\n      return opts;\n  }\n  }\n};\n"],"sourceRoot":""}