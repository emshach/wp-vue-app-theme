{"version":3,"sources":["webpack:///./js/components/filmstrip/index.js","webpack:///./js/components/filmstrip/template.html","webpack:///./js/mixins/media-actions.js"],"names":["template","require","mixins","media_actions","props","title","type","String","default","contents","Array","current","Number","query","more","Boolean","methods","canWatchNow","episode","user","store","state","as","rst","restrictions","admin","public","subscriber","members","logged_in","auth","redirect","sayAction","trans","release_type","cardClasses","private","payperview","hidden","show","needsSubscription","getSources","Object","values","sources","concat","src","source_url","mime_type","videoPlayerOptions","defaults","opts","assign","controls","autoplay","fluid"],"mappings":"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","file":"6.js","sourcesContent":["import media_actions from '../../mixins/media-actions';\nexport default {\n  template: require( './template.html' ),\n  mixins: [ media_actions ],\n  props: {\n    title: {\n      type: String,\n      default: \"\"\n    },\n    contents: {\n      type: Array,\n      default: () => []\n    },\n    current: {\n      type: Number,\n      default: 0\n    },\n    query: {\n      type: String,\n      default: \"\"\n    },\n    more: {\n      type: Boolean,\n      default: false\n    }\n  }\n};\n// TODO: add more\n","module.exports = \"<section class=\\\"filmstrip\\\">\\n  <h3 class=\\\"title\\\" v-if=\\\"title\\\">{{ title }}</h3>\\n  <div class=\\\"content\\\" v-if=\\\"contents.length > 0\\\">\\n    <carousel :per-page=\\\"1\\\"\\n              :per-page-custom=\\\"[[540,2],[780,3],[1020,4],[1220,5],[1500,6],\\n                                [2740,7],[1980,8],[2220,9],[2460,11],[2700,12]]\\\"\\n              :navigation-enabled=\\\"true\\\"\\n              :pagination-enabled=\\\"false\\\"\\n              :scroll-per-page=\\\"false\\\">\\n      <slide v-for=\\\"( item, index ) in contents\\\" :key=\\\"index\\\">\\n        <b-card :title=\\\"item.title ? item.title.rendered: ''\\\"\\n                :img-src=\\\"item.thumbnail\\\"\\n                :class=\\\"[ 'item', { current: item.id == current },\\n                          cardClasses( item )]\\\"\\n                img-top >\\n          <p class=\\\"card-text\\\"\\n             v-html=\\\"item.content ? item.content.rendered\\n                     : item.caption ? item.caption.rendered : ''\\\"></p>\\n          <b-btn v-if=\\\"item.id == current\\\" variant=\\\"link\\\"\\n                 size=\\\"lg\\\" class=\\\"float-right watching\\\"\\n                 v-scroll-to=\\\"{ el: '#featured', container: '.page',\\n                                x: false, y: true }\\\">now {{\\n            sayAction( item )}}ing</b-btn>\\n          <watch-button v-else :target=\\\"item\\\"></watch-button>\\n        </b-card>\\n      </slide>\\n      <div class=\\\"swiper-button-prev\\\" slot=\\\"button-prev\\\"></div>\\n      <div class=\\\"swiper-button-next\\\" slot=\\\"button-next\\\"></div>\\n      <div class=\\\"swiper-scrollbar\\\"   slot=\\\"scrollbar\\\"></div>\\n    </carousel>\\n  </div>\\n  <template v-else>\\n    <div class=\\\"message empty-list\\\">nothing to show yet</div>\\n    <a v-if=\\\"query\\\" class=\\\"loadmore\\\" href=\\\"#\\\"\\n       @click.prevent=\\\"loadMore\\\">refresh</a>\\n  </template>\\n</section>\\n\";","import store from '../lib/store';\nexport default {\n  methods: {\n    canWatchNow ( episode ) {\n      const user = store.state.user;\n      if ( user.as ) {\n        var as  = user.as;\n        var rst = episode.restrictions;\n        if ( as.admin || rst.public )\n          return true;\n        if ( as.subscriber && rst.members )\n          return true;\n        if ( as.logged_in && rst.auth )\n          return true;\n        return false;\n      }\n      return !episode.redirect;\n    },\n    sayAction( episode, trans ) {\n      return ( episode.release_type == 'video' ? 'watch'\n               : episode.release_type == 'audio'\n               ? ( trans ? 'listen to' : 'listen' )\n               : 'view' );\n    },\n    cardClasses( episode ) {\n      if ( !episode || !episode.restrictions )\n        return {};\n      return {\n        private: episode.restrictions.private,\n        public: episode.restrictions.public,\n        auth: episode.restrictions.auth,\n        payperview: episode.restrictions.payperview,\n        members: episode.restrictions.members,\n        hidden: !episode.restrictions.show && !episode.restrictions.public\n      };\n    },\n    needsSubscription ( episode ) {\n      const user = store.state.user;\n      return ( episode.restrictions.members && ( !user.as || !user.as.subscriber ));\n    },\n    getSources( episode ) {\n      return Object.values( episode.sources ).concat([{\n        src: episode.source_url,\n        type: episode.mime_type\n      }]);\n    },\n    videoPlayerOptions( episode, defaults ) {\n      var opts = Object.assign( {\n        controls: true,\n        autoplay: 'play',\n        fluid: true\n      }, defaults || {});\n      opts.sources = this.getSources( episode );\n      return opts;\n  }\n  }\n};\n"],"sourceRoot":""}