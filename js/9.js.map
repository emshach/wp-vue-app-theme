{"version":3,"sources":["webpack:///./js/components/login/index.js","webpack:///./js/components/login/template.html","webpack:///./js/lib/scroll-header.js"],"names":["template","require","props","then","type","String","default","data","sstate","store","state","img","title","show","mounted","document","he","decode","site","_wpapix","wpapix","path","Path","fetch","done","rpost","console","log","rendered","background_image","$nextTick","ScrollHeader","init","methods","showImg","last_scroll","scroll_dir","$","header","container","_","$el","scrollTop","off","on","e","last","dir","cur","$head","stop","animate","top","innerHeight","topH","removeClass","addClass","destroy","jQuery"],"mappings":"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","file":"9.js","sourcesContent":["import store from '../../lib/store';\nimport _wpapix from '../../lib/wpapix';\nimport ScrollHeader from '../../lib/scroll-header';\nimport he from 'he';\nexport default {\n  template: require( './template.html' ),\n  props: {\n    then: {\n      type: String,\n      default: ''\n    }\n  },\n  data () {\n    return {\n      sstate: store.state,\n      img: '',\n      title: '',\n      show: false\n    };\n  },\n  mounted() {\n    document.title = he.decode( this.sstate.site.title );\n    _wpapix.then( wpapix => {\n      var path = new wpapix.Path({ path: 'login' });\n      path.fetch().done(( rpost ) => {\n        console.log( 'got home page', rpost );\n        this.title = rpost.title.rendered;\n        this.img = rpost.background_image || '';\n      });\n    });\n    this.$nextTick(() => {\n      ScrollHeader.init( '#masthead', \"#featured,#app>.page>.featured-outer\" );\n    });\n  },\n  methods: {\n    showImg() {\n      this.show = true;\n    }\n  }\n};\n","module.exports = \"<div class=\\\"login page\\\">\\n  <div id=\\\"bg-image-wrapper\\\">\\n    <transition name=\\\"fade-in\\\">\\n      <img id=\\\"bg-image\\\" :src=\\\"img\\\" @load=\\\"showImg\\\" v-show=\\\"show\\\"/>\\n    </transition>\\n  </div>\\n  <div class=\\\"featured-outer small\\\"></div>\\n\\n  <main role=\\\"main\\\">\\n    <h1 class=\\\"title\\\">{{ title }}</h1>\\n    <login-form :redirect=\\\"then\\\"></login-form>\\n    <div v-if=\\\"then\\\" class=\\\"message\\\">Please log in or sign up to access that\\n      page/content.</div>\\n  </main>\\n  <wp-footer></wp-footer>\\n</div>\\n\";","const ScrollHeader = {\n  last_scroll: 0,\n  scroll_dir: 'none'\n};\n\n(function ($) {\n  ScrollHeader.init = ( header, container ) => {\n    var _ = ScrollHeader;\n    var $el = $( \"#app>.page\" );\n    _.last_scroll = $el.scrollTop();\n    $el.off( 'scroll' );\n    $el.on( 'scroll', e => {\n      var last = _.last_scroll;\n      var dir = _.scroll_dir;\n      var cur = _.last_scroll = $el.scrollTop();\n      var $head = $( header );\n      \n      if ( last < cur ) {\n        if ( dir != (_.scroll_dir = 'down' ))\n          $head.stop().animate( { top: - $head.innerHeight() - 10 }, 'slow' );\n      } else if ( last > cur ) {\n        if ( dir != (_.scroll_dir = 'up' ))\n          $head.stop().animate( { top: 0 }, 'slow' );\n      } else\n        _.scroll_dir = 'none';\n      var topH = $( container ).innerHeight() - $head.innerHeight() + 20;\n      if ( cur > topH ) \n        $head.removeClass( 'mrk-bg-clear' ).addClass( 'mrk-bg-dark' );\n      else\n        $head.removeClass( 'mrk-bg-dark' ).addClass( 'mrk-bg-clear' );\n    });\n  };\n  ScrollHeader.destroy = () => {\n    $( \"#app>.page\" ).off( 'scroll' );\n  };\n})( jQuery );\n\nexport default ScrollHeader;\n"],"sourceRoot":""}