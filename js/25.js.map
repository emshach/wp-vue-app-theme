{"version":3,"sources":["webpack:///./js/components/subscription-menu/index.js","webpack:///./js/components/subscription-menu/template.html"],"names":["template","require","props","levels","type","Array","default","data","sstate","store","state","selectedLevel","storedLevels","mounted","length","wp","api","loadPromise","done","wpapix","Membership","path","fetch","res","console","log","methods","setLevel","level","user","unsetLevel","computed","memberLevels","currentLevel","membership"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACe;AACbA,UAAQ,EAAEC,mBAAO,CAAE,wEAAF,CADJ;AAEbC,OAAK,EAAE;AACLC,UAAM,EAAE;AACNC,UAAI,EAAEC,KADA;AAENC,aAAO,EAAE;AAAA,eAAM,EAAN;AAAA;AAFH;AADH,GAFM;AAQbC,MARa,kBAQN;AACL,WAAO;AACLC,YAAM,EAAEC,kDAAK,CAACC,KADT;AAELC,mBAAa,EAAE,KAFV;AAGLC,kBAAY,EAAE;AAHT,KAAP;AAKD,GAdY;AAebC,SAfa,qBAeH;AAAA;;AACR,QAAI,CAAE,KAAKV,MAAL,CAAYW,MAAlB,EACEC,EAAE,CAACC,GAAH,CAAOC,WAAP,CAAmBC,IAAnB,CAAwB,YAAM;AAC5B,UAAIf,MAAM,GAAG,IAAIgB,kDAAM,CAACC,UAAX,CAAsB;AAAEC,YAAI,EAAE;AAAR,OAAtB,CAAb;AACAlB,YAAM,CAACmB,KAAP,GAAeJ,IAAf,CAAqB,UAAAK,GAAG,EAAI;AAC1BC,eAAO,CAACC,GAAR,CAAa,uBAAb,EAAsCF,GAAtC;AACA,aAAI,CAACX,YAAL,GAAoBW,GAApB;AACD,OAHD;AAID,KAND;AAOH,GAxBY;AAyBbG,SAAO,EAAE;AACPC,YADO,oBACGC,KADH,EACW;AAChB,UAAI,CAAE,KAAKC,IAAX,EAAkB,CAChB;AACD;;AACD,WAAKlB,aAAL,GAAqBiB,KAArB;AACD,KANM;AAOPE,cAPO,wBAOM;AACX,WAAKnB,aAAL,GAAqB,KAArB;AACD;AATM,GAzBI;AAoCboB,UAAQ,EAAE;AACRF,QADQ,kBACD;AACL,aAAO,KAAKrB,MAAL,CAAYqB,IAAnB;AACD,KAHO;AAIRG,gBAJQ,0BAIO;AACb,aAAS,KAAK7B,MAAL,CAAYW,MAAZ,GAAqB,KAAKX,MAA1B,GAAmC,KAAKS,YAAjD;AACD,KANO;AAORqB,gBAPQ,0BAOO;AACb,aAAO,KAAKJ,IAAL,IAAa,KAAKA,IAAL,CAAUK,UAAvB,IAAqC,KAA5C;AACD;AATO;AApCG,CAAf,E;;;;;;;;;;;ACHA,2TAA2T,sBAAsB,8EAA8E,gCAAgC,8SAA8S,kCAAkC,wLAAwL,8gBAA8gB,wBAAwB,2IAA2I,2BAA2B,oOAAoO,6DAA6D,0G","file":"25.js","sourcesContent":["import store from '../../lib/store';\nimport axios from 'axios';\nimport wpapix from '../../lib/wpapi';\nexport default {\n  template: require( './template.html' ),\n  props: {\n    levels: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      sstate: store.state,\n      selectedLevel: false,\n      storedLevels: false\n    };\n  },\n  mounted() {\n    if (! this.levels.length )\n      wp.api.loadPromise.done(() => {\n        var levels = new wpapix.Membership({ path: 'levels' });\n        levels.fetch().done( res => {\n          console.log( 'got membership levels', res );\n          this.storedLevels = res;\n        });\n      });\n  },\n  methods: {\n    setLevel( level ) {\n      if (! this.user ) {\n        // redirect to login, then continue\n      }\n      this.selectedLevel = level;\n    },\n    unsetLevel() {\n      this.selectedLevel = false;\n    }\n  },\n  computed: {\n    user() {\n      return this.sstate.user;\n    },\n    memberLevels() {\n      return ( this.levels.length ? this.levels : this.storedLevels );\n    },\n    currentLevel() {\n      return this.user && this.user.membership || false;\n    }\n  }\n};\n","module.exports = \"<div class=\\\"subscription-menu container\\\">\\n  <transition name=\\\"fade-fast\\\" mode=\\\"out-in\\\">\\n    <div v-if=\\\"selectedLevel\\\" class=\\\"row\\\" key=\\\"confirm\\\">\\n      <h2 class=\\\"message\\\" key=\\\"head\\\">Confirm Order</h2>\\n      <div class=\\\"row\\\" key=\\\"body\\\">\\n        <div class=\\\"col-8 name\\\">{{ selectedLevel.name }}</div>\\n        <!-- TODO: expires -->\\n        <div class=\\\"col-4 price\\\">${{ selectedLevel.billing_amount }}</div>\\n      </div>\\n      <div class=\\\"row\\\" key=\\\"links\\\">\\n        <div class=\\\"col-4\\\"></div>\\n        <div class=\\\"col-4\\\">\\n          <a class=\\\"cancel\\\" href=\\\"#\\\" @click.stop=\\\"unsetLevel\\\">go back</a>\\n        </div>\\n        <div class=\\\"col-4\\\">\\n          <router-link\\n            :to=\\\"{ name:'members-checkout', query: {\\n                   level: selectedLevel.id,\\n                   'submit-checkout': 1,\\n                   checkjavascript: 1,\\n                   javascriptok: 1\\n                 }}\\\"\\n            class=\\\"submit confirm checkout paypal paypal-express\\\"\\n            target=\\\"_blank\\\">checkout</router-link>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"row\\\" key=\\\"select\\\">\\n      <div v-for=\\\"level in memberLevels\\\" :key=\\\"level.id\\\"\\n           class=\\\"col-12 col-md-4\\\">\\n        <b-card no-body class=\\\"member-level\\\" :header=\\\"level.name\\\">\\n          <b-card-body>\\n            <div class=\\\"description\\\" v-html=\\\"level.description\\\"></div>\\n            <div class=\\\"price\\\">${{ level.billing_amount }}</div>\\n          </b-card-body>\\n          <b-card-footer v-if=\\\"currentLevel.id == level.id\\\" class=\\\"selected\\\">\\n            expires {{ user.membership.expires }}\\n          </b-card-footer>\\n          <b-card-footer v-else class=\\\"buy\\\">\\n            <!-- <router-link :to=\\\"'/members/signup/' + level.id\\\"></router-link> -->\\n            <a href=\\\"#\\\" @click.stop=\\\"setLevel( level )\\\">{{\\n              user ? 'select' : 'sign up'\\n              }}</a>\\n          </b-card-footer>\\n        </b-card>\\n      </div>\\n    </div>\\n  </transition>\\n</div>\\n\";"],"sourceRoot":""}