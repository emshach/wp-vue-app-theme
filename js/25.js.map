{"version":3,"sources":["webpack:///./js/components/subscription-menu/index.js","webpack:///./js/components/subscription-menu/template.html"],"names":["template","require","props","levels","type","Array","default","data","sstate","store","state","selectedLevel","storedLevels","mounted","length","wp","api","loadPromise","done","wpapix","Membership","path","fetch","res","console","log","methods","setLevel","level","unsetLevel","computed","user","memberLevels"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACe;AACbA,UAAQ,EAAEC,mBAAO,CAAE,wEAAF,CADJ;AAEbC,OAAK,EAAE;AACLC,UAAM,EAAE;AACNC,UAAI,EAAEC,KADA;AAENC,aAAO,EAAE;AAAA,eAAM,EAAN;AAAA;AAFH;AADH,GAFM;AAQbC,MARa,kBAQN;AACL,WAAO;AACLC,YAAM,EAAEC,kDAAK,CAACC,KADT;AAELC,mBAAa,EAAE,KAFV;AAGLC,kBAAY,EAAE;AAHT,KAAP;AAKD,GAdY;AAebC,SAfa,qBAeH;AAAA;;AACR,QAAI,CAAE,KAAKV,MAAL,CAAYW,MAAlB,EACEC,EAAE,CAACC,GAAH,CAAOC,WAAP,CAAmBC,IAAnB,CAAwB,YAAM;AAC5B,UAAIf,MAAM,GAAG,IAAIgB,kDAAM,CAACC,UAAX,CAAsB;AAAEC,YAAI,EAAE;AAAR,OAAtB,CAAb;AACAlB,YAAM,CAACmB,KAAP,GAAeJ,IAAf,CAAqB,UAAAK,GAAG,EAAI;AAC1BC,eAAO,CAACC,GAAR,CAAa,uBAAb,EAAsCF,GAAtC;AACA,aAAI,CAACX,YAAL,GAAoBW,GAApB;AACD,OAHD;AAID,KAND;AAOH,GAxBY;AAyBbG,SAAO,EAAE;AACPC,YADO,oBACGC,KADH,EACW;AAChB,WAAKjB,aAAL,GAAqBiB,KAArB;AACD,KAHM;AAIPC,cAJO,wBAIM;AACX,WAAKlB,aAAL,GAAqB,KAArB;AACD;AANM,GAzBI;AAiCbmB,UAAQ,EAAE;AACRC,QADQ,kBACD;AACL,aAAO,KAAKvB,MAAL,CAAYuB,IAAnB;AACD,KAHO;AAIRC,gBAJQ,0BAIO;AACb,aAAS,KAAK7B,MAAL,CAAYW,MAAZ,GAAqB,KAAKX,MAA1B,GAAmC,KAAKS,YAAjD;AACD;AANO;AAjCG,CAAf,E;;;;;;;;;;;ACHA,uPAAuP,sBAAsB,uEAAuE,uBAAuB,gSAAgS,qCAAqC,wLAAwL,qUAAqU,cAAc,4CAA4C,qBAAqB,wCAAwC,wBAAwB,sGAAsG,2BAA2B,2MAA2M,sEAAsE,sF","file":"25.js","sourcesContent":["import store from '../../lib/store';\nimport axios from 'axios';\nimport wpapix from '../../lib/wpapi';\nexport default {\n  template: require( './template.html' ),\n  props: {\n    levels: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      sstate: store.state,\n      selectedLevel: false,\n      storedLevels: false\n    };\n  },\n  mounted() {\n    if (! this.levels.length )\n      wp.api.loadPromise.done(() => {\n        var levels = new wpapix.Membership({ path: 'levels' });\n        levels.fetch().done( res => {\n          console.log( 'got membership levels', res );\n          this.storedLevels = res;\n        });\n      });\n  },\n  methods: {\n    setLevel( level ) {\n      this.selectedLevel = level;\n    },\n    unsetLevel() {\n      this.selectedLevel = false;\n    }\n  },\n  computed: {\n    user() {\n      return this.sstate.user;\n    },\n    memberLevels() {\n      return ( this.levels.length ? this.levels : this.storedLevels );\n    }\n  }\n};\n","module.exports = \"<div class=\\\"subscription-menu container\\\">\\n  <transition-group name=\\\"fade-in\\\">\\n    <template v-if=\\\"selectedLevel\\\">\\n      <h2 class=\\\"message\\\">Confirm Order</h2>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-8\\\">{{ selectedLevel.name }}</div>\\n        <!-- TODO: expires -->\\n        <div class=\\\"col-4\\\">{{ selectedLevel.price }}</div>\\n      </div>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-4\\\"></div>\\n        <div class=\\\"col-4\\\">\\n          <a class=\\\"cancel\\\" href=\\\"#\\\" @click.stop=\\\"unsetLevel\\\">go back</a>\\n        </div>\\n        <div class=\\\"col-4\\\">\\n          <router-link\\n            :to=\\\"{ name:'membership-checkout', query: {\\n                   level: selectedLevel.id,\\n                   'submit-checkout': 1,\\n                   checkjavascript: 1,\\n                   javascriptok: 1\\n                 }}\\\"\\n            class=\\\"submit confirm checkout paypal paypal-express\\\"\\n            target=\\\"_blank\\\">checkout</router-link>\\n        </div>\\n      </div>\\n    </template>\\n    <template v-else>\\n      <div v-for=\\\"level in memberLevels\\\" :key=\\\"level.id\\\"\\n           class=\\\"member-level col-12 col-md-4\\\">\\n        <h4>{{ level.name }}</h4>\\n        <div class=\\\"description\\\">{{ level.description }}</div>\\n        <div class=\\\"price\\\">${{ level.billing_amount }}</div>\\n        <div v-if=\\\"user.membership.id == level.id\\\" class=\\\"selected\\\">\\n          expires {{ user.membership.expires }}\\n        </div>\\n        <div v-else class=\\\"buy\\\">\\n          <!-- <router-link :to=\\\"'/members/signup/' + level.id\\\"></router-link> -->\\n          <a href=\\\"#\\\" @click.stop=\\\"setLevel( level.id )\\\">{{\\n              user.membership ? 'switch' : 'sign up'\\n            }}</a>\\n        </div>\\n      </div>\\n    </template>\\n  </transition-group>\\n</div>\\n\";"],"sourceRoot":""}