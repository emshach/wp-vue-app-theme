{"version":3,"sources":["webpack:///./js/components/watch-button/index.js","webpack:///./js/components/watch-button/template.html","webpack:///./js/mixins/media-actions.js"],"names":["template","require","mixins","media_actions","props","methods","canWatchNow","episode","user","store","state","as","rst","restrictions","admin","public","subscriber","members","logged_in","auth","redirect","sayAction","trans","release_type","cardClasses","private","payperview","hidden","show","needsSubscription","getSources","Object","values","sources","concat","src","source_url","type","mime_type","videoPlayerOptions","defaults","opts","assign","controls","autoplay","aspectRatio"],"mappings":"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","file":"12.js","sourcesContent":["import media_actions from '../../mixins/media-actions';\nexport default {\n  template: require( './template.html' ),\n  mixins: [ media_actions ],\n  props: [ 'target']\n};\n","module.exports = \"<b-btn v-if=\\\"target && canWatchNow( target )\\\"\\n       variant=\\\"primary\\\" :to=\\\"target.path\\\" size=\\\"lg\\\"\\n       class=\\\"float-right\\\">{{ sayAction( target )}} now</b-btn>\\n<b-btn v-else-if=\\\"needsSubscription( target )\\\" size=\\\"lg\\\"\\n       :to=\\\"target.preview ||{ path: '/members', query: { then: target.path }}\\\"\\n       class=\\\"watch subscribe-to-watch\\\"\\n       variant=\\\"warning\\\">subscribe to {{ sayAction( target ) }}</b-btn>\\n\";","import store from '../lib/store';\nexport default {\n  methods: {\n    canWatchNow ( episode ) {\n      const user = store.state.user;\n      if ( user.as ) {\n        var as  = user.as;\n        var rst = episode.restrictions;\n        if ( as.admin || rst.public )\n          return true;\n        if ( as.subscriber && rst.members )\n          return true;\n        if ( as.logged_in && rst.auth )\n          return true;\n        return false;\n      }\n      return !episode.redirect;\n    },\n    sayAction( episode, trans ) {\n      return ( episode.release_type == 'video' ? 'watch'\n               : episode.release_type == 'audio'\n               ? ( trans ? 'listen to' : 'listen' )\n               : 'view' );\n    },\n    cardClasses( episode ) {\n      if ( !episode || !episode.restrictions )\n        return {};\n      return {\n        private: episode.restrictions.private,\n        public: episode.restrictions.public,\n        auth: episode.restrictions.auth,\n        payperview: episode.restrictions.payperview,\n        members: episode.restrictions.members,\n        hidden: !episode.restrictions.show && !episode.restrictions.public\n      };\n    },\n    needsSubscription ( episode ) {\n      const user = store.state.user;\n      return ( episode.restrictions.members && ( !user.as || !user.as.subscriber ));\n    },\n    getSources( episode ) {\n      return Object.values( episode.sources ).concat([{\n        src: episode.source_url,\n        type: episode.mime_type\n      }]);\n    },\n    videoPlayerOptions( episode, defaults ) {\n      var opts = Object.assign( {\n        controls: true,\n        autoplay: 'play',\n        aspectRatio: \"16:9\",\n        // controlBar: {\n        //   volumeMenuButton: {\n        //     inline: false,\n        //     vertical: true\n        //   }\n        // }\n      }, defaults || {});\n      opts.sources = this.getSources( episode );\n      return opts;\n  }\n  }\n};\n"],"sourceRoot":""}