{"version":3,"sources":["webpack:///./js/components/user-block/index.js","webpack:///./js/components/user-block/template.html"],"names":["template","require","data","user","store","state","recaptcha","key","recaptcha_key","response","loginForm","log","pwd","tokenLogin","methods","login","axios","post","then","Swal","window","location","reload","catch","error","nolink","link","sendLink","enterPass","recaptchaSuccess","computed","loggedIn","id","logoutLink","he","decode","logout"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACe;AACbA,UAAQ,EAAEC,mBAAO,CAAE,iEAAF,CADJ;AAEbC,MAFa,kBAEN;AACL,WAAO;AACLC,UAAI,EAAEC,kDAAK,CAACC,KAAN,CAAYF,IADb;AAELG,eAAS,EAAE;AACTC,WAAG,EAAEH,kDAAK,CAACC,KAAN,CAAYG,aADR;AAETC,gBAAQ,EAAE;AAFD,OAFN;AAMLC,eAAS,EAAE;AACTC,WAAG,EAAE,EADI;AAETC,WAAG,EAAE,EAFI;AAGT,gCAAuB;AAHd,OANN;AAWLC,gBAAU,EAAE;AAXP,KAAP;AAaD,GAhBY;AAiBbC,SAAO,EAAE;AACPC,SADO,mBACC;AACN,UAAK,KAAKF,UAAV,EAAuB,CACrB;AACD,OAFD,MAGK;AACHG,oDAAK,CAACC,IAAN,CAAY,eAAZ,EAA6B,KAAKP,SAAlC,EACIQ,IADJ,CACU,UAAAT,QAAQ,EAAI;AACjB;AACAU,4DAAI,CAAE,kCAAF,CAAJ;AACAC,gBAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,SALJ,EAMIC,KANJ,CAMW,UAAAC,KAAK,EAAI,CACf;AACD,SARJ;AASD;AACF,KAhBM;AAiBPC,UAjBO,oBAiBE;AACP,WAAKf,SAAL,CAAegB,IAAf,GAAsB,KAAtB;AACD,KAnBM;AAoBPC,YApBO,sBAoBI;AACT,WAAKd,UAAL,GAAkB,IAAlB;AACD,KAtBM;AAuBPe,aAvBO,uBAuBK;AACV,WAAKf,UAAL,GAAkB,KAAlB;AACD,KAzBM;AA0BPgB,oBA1BO,4BA0BWpB,QA1BX,EA0BsB;AAC3B,WAAKH,SAAL,CAAeG,QAAf,GAA0BA,QAA1B;AACD;AA5BM,GAjBI;AA+CbqB,UAAQ,EAAE;AACRC,YADQ,sBACG;AACT,aAAO,KAAK5B,IAAL,IAAa,KAAKA,IAAL,CAAU6B,EAA9B;AACD,KAHO;AAIRC,cAJQ,wBAIK;AACX,aAAOC,yCAAE,CAACC,MAAH,CAAW,KAAKhC,IAAL,CAAUiC,MAArB,CAAP;AACD;AANO;AA/CG,CAAf,E;;;;;;;;;;;ACJA,+IAA+I,2CAA2C,4pD","file":"31.js","sourcesContent":["import store from '../../lib/store';\nimport he from 'he';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nexport default {\n  template: require( './template.html' ),\n  data() {\n    return {\n      user: store.state.user,\n      recaptcha: {\n        key: store.state.recaptcha_key,\n        response: null\n      },\n      loginForm: {\n        log: '',\n        pwd: '',\n        'g-recaptcha-response':''\n      },\n      tokenLogin: false\n    };\n  },\n  methods: {\n    login() {\n      if ( this.tokenLogin ) {\n        // passwordless-login\n      }\n      else {\n        axios.post ('/wp-login.php', this.loginForm )\n           .then( response => {\n             // success!\n             Swal( 'Successfully logged in! Welcome!' );\n             window.location.reload();\n           })\n           .catch( error => {\n             // sorry! try again\n           });\n      }\n    },\n    nolink() {\n      this.loginForm.link = false;\n    },\n    sendLink() {\n      this.tokenLogin = true;\n    },\n    enterPass() {\n      this.tokenLogin = false;\n    },\n    recaptchaSuccess( response ) {\n      this.recaptcha.response = response;\n    }\n  },\n  computed: {\n    loggedIn() {\n      return this.user && this.user.id;\n    },\n    logoutLink() {\n      return he.decode( this.user.logout );\n    }\n  }\n};\n","module.exports = \"<b-dd id=\\\"user\\\">\\n  <template slot=\\\"button-content\\\">\\n    <span class=\\\"dashicons dashicons-admin-users\\\"></span>\\n    {{ loggedIn ? user.display_name: 'sign in' }}\\n  </template>\\n  <b-dd-item v-if=\\\"loggedIn\\\" :href=\\\"logoutLink\\\">log out</b-dd-item>\\n  <b-form v-else @submit=\\\"login\\\">\\n    <b-form-group id=\\\"login-username\\\"\\n                  label=\\\"username or email address\\\"\\n                  label-for=\\\"username\\\">\\n      <b-form-input id=\\\"username\\\"\\n                    type=\\\"email\\\"\\n                    v-model=\\\"loginForm.user\\\"\\n                    required></b-form-input>\\n    </b-form-group>\\n    <transition name=\\\"fade-fast\\\" mode=\\\"out-in\\\">\\n      <div id=\\\"login-password\\\" v-if=\\\"tokenLogin\\\">\\n        <b-alert show>An email will be sent with a link that will log you in\\n          when you click it. This link will expire in 10 minutes.</b-alert>\\n        <b-btn variant=\\\"link\\\" @click=\\\"enterPass\\\">enter password instead</b-btn>\\n      </div>\\n      <b-form-group v-else\\n                    id=\\\"login-password\\\"\\n                    label=\\\"password\\\"\\n                    label-for=\\\"username\\\">\\n        <b-form-input id=\\\"password\\\"\\n                      type=\\\"password\\\"\\n                      @click=\\\"nolink\\\"\\n                      v-model=\\\"loginForm.pass\\\"\\n                      required></b-form-input>\\n        <b-btn variant=\\\"link\\\" @click=\\\"sendLink\\\">email login link instead</b-btn>\\n      </b-form-group>\\n    </transition>\\n    <b-form-group>\\n      <vue-recaptcha :sitekey=\\\"recaptcha.key\\\" @verify=\\\"recaptchaSuccess\\\">\\n      </vue-recaptcha>\\n    </b-form-group>\\n    <b-form-group class=\\\"login-actions\\\">\\n      <b-btn type=\\\"submit\\\" variant=\\\"primary\\\">login</b-btn>\\n      or\\n      <b-btn type=\\\"submit\\\" variant=\\\"success\\\">sign-up</b-btn>\\n    </b-form-group>\\n  </b-form>\\n</b-dd>\\n\";"],"sourceRoot":""}